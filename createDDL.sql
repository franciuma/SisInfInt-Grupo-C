CREATE TABLE ALUMNO (ID BIGINT NOT NULL, DNI VARCHAR(9) NOT NULL UNIQUE, Email_Institucional VARCHAR(255) NOT NULL, Email_Personal VARCHAR(255), Telefono_movil VARCHAR(255), Nombre_Completo VARCHAR(255) NOT NULL, Telefono_fijo VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE ASIGNATURA (Referencia INTEGER NOT NULL, DTYPE VARCHAR(31), Duracion INTEGER, Caracter VARCHAR(255), Codigo INTEGER NOT NULL, Creditos INTEGER NOT NULL, Curso INTEGER, Idiomas_de_Impartición VARCHAR(255), Nombre VARCHAR(255) NOT NULL, Ofertada TINYINT(1) default 0 NOT NULL, Unidad_Temporal_Cuatrimestre VARCHAR(255), TITULACION_Codigo BIGINT, Mencion VARCHAR(255), PRIMARY KEY (Referencia))
CREATE TABLE CENTRO (ID BIGINT NOT NULL, Direccion VARCHAR(255) NOT NULL, Nombre VARCHAR(255) NOT NULL UNIQUE, Telefono_Conserjeria VARCHAR(9), PRIMARY KEY (ID))
CREATE TABLE CLASE (Hora_Fin DATE, GRUPO INTEGER NOT NULL, DIA DATE NOT NULL, HORAINICIO DATE NOT NULL, ASIGNATURA_Referencia INTEGER, GRUPO_ID INTEGER NOT NULL, PRIMARY KEY (GRUPO, DIA, HORAINICIO, GRUPO_ID))
CREATE TABLE ENCUESTA (Fecha_Envio DATE NOT NULL, EXPEDIENTE_Numero_Expediente BIGINT, PRIMARY KEY (Fecha_Envio))
CREATE TABLE EXPEDIENTE (Numero_Expediente BIGINT NOT NULL, Activo TINYINT(1) default 0, Nota_Media_Provisional BIGINT, ALUMNO_ID BIGINT, TITULACION_Codigo BIGINT, PRIMARY KEY (Numero_Expediente))
CREATE TABLE GRUPO (ID INTEGER NOT NULL, Asignar VARCHAR(255), Curso INTEGER NOT NULL UNIQUE, Ingles TINYINT(1) default 0 NOT NULL, Letra CHAR(1) NOT NULL UNIQUE, Plazas INTEGER, Turno_Mañana_Tarde VARCHAR(255) NOT NULL, Visible TINYINT(1) default 0, GRUPO_ID INTEGER, TITULACION_Codigo BIGINT, PRIMARY KEY (ID))
CREATE TABLE GRUPOSPORASIG (Oferta TINYINT(1) default 0, CURSOACADEMICO VARCHAR(255) NOT NULL, ASIGNATURA INTEGER NOT NULL, GRUPO INTEGER NOT NULL, ASIGNATURA_Referencia INTEGER, GRUPO_ID INTEGER, PRIMARY KEY (CURSOACADEMICO, ASIGNATURA, GRUPO))
CREATE TABLE MATRICULA (Curso_Academico VARCHAR(255), Estado VARCHAR(255) NOT NULL, Fecha_Matricula DATETIME NOT NULL, Listado_Asignaturas VARCHAR(255), Nuevo_ingreso TINYINT(1) default 0, Numero_Archivo INTEGER, Turno_Preferente VARCHAR(255), CURSOACADEMICO VARCHAR(255) NOT NULL, EXPEDIENTE BIGINT NOT NULL, EXPEDIENTE_Numero_Expediente BIGINT, PRIMARY KEY (CURSOACADEMICO, EXPEDIENTE))
CREATE TABLE TITULACION (Codigo BIGINT NOT NULL, Creditos BIGINT NOT NULL, Nombre VARCHAR(255) NOT NULL, PRIMARY KEY (Codigo))
CREATE TABLE ASIGNATURA_MATRICULA (ASIGNATURA_Referencia INTEGER NOT NULL, EXPEDIENTE BIGINT NOT NULL, CURSOACADEMICO VARCHAR(255) NOT NULL, GRUPO_ID INTEGER NOT NULL, PRIMARY KEY (ASIGNATURA_Referencia, EXPEDIENTE, CURSOACADEMICO))
CREATE TABLE JND_Centro_Titulacion (Centro_FK BIGINT NOT NULL, Titulacion_FK BIGINT NOT NULL, PRIMARY KEY (Centro_FK, Titulacion_FK))
CREATE TABLE ENCUESTA_GRUPOSPORASIG (contieneEncuestas_Fecha_Envio DATE NOT NULL, CURSOACADEMICO VARCHAR(255) NOT NULL, ASIGNATURA INTEGER NOT NULL, GRUPO INTEGER NOT NULL, PRIMARY KEY (contieneEncuestas_Fecha_Envio, CURSOACADEMICO, ASIGNATURA, GRUPO))
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_TITULACION_Codigo FOREIGN KEY (TITULACION_Codigo) REFERENCES TITULACION (Codigo)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_ASIGNATURA_Referencia FOREIGN KEY (ASIGNATURA_Referencia) REFERENCES ASIGNATURA (Referencia)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE ENCUESTA ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTE_Numero_Expediente FOREIGN KEY (EXPEDIENTE_Numero_Expediente) REFERENCES EXPEDIENTE (Numero_Expediente)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_TITULACION_Codigo FOREIGN KEY (TITULACION_Codigo) REFERENCES TITULACION (Codigo)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_TITULACION_Codigo FOREIGN KEY (TITULACION_Codigo) REFERENCES TITULACION (Codigo)
ALTER TABLE GRUPOSPORASIG ADD CONSTRAINT FK_GRUPOSPORASIG_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPOSPORASIG ADD CONSTRAINT FK_GRUPOSPORASIG_ASIGNATURA_Referencia FOREIGN KEY (ASIGNATURA_Referencia) REFERENCES ASIGNATURA (Referencia)
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_Numero_Expediente FOREIGN KEY (EXPEDIENTE_Numero_Expediente) REFERENCES EXPEDIENTE (Numero_Expediente)
ALTER TABLE ASIGNATURA_MATRICULA ADD CONSTRAINT FK_ASIGNATURA_MATRICULA_CURSOACADEMICO FOREIGN KEY (CURSOACADEMICO, EXPEDIENTE) REFERENCES MATRICULA (CURSOACADEMICO, EXPEDIENTE)
ALTER TABLE ASIGNATURA_MATRICULA ADD CONSTRAINT FK_ASIGNATURA_MATRICULA_ASIGNATURA_Referencia FOREIGN KEY (ASIGNATURA_Referencia) REFERENCES ASIGNATURA (Referencia)
ALTER TABLE ASIGNATURA_MATRICULA ADD CONSTRAINT FK_ASIGNATURA_MATRICULA_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE JND_Centro_Titulacion ADD CONSTRAINT FK_JND_Centro_Titulacion_Centro_FK FOREIGN KEY (Centro_FK) REFERENCES CENTRO (ID)
ALTER TABLE JND_Centro_Titulacion ADD CONSTRAINT FK_JND_Centro_Titulacion_Titulacion_FK FOREIGN KEY (Titulacion_FK) REFERENCES TITULACION (Codigo)
ALTER TABLE ENCUESTA_GRUPOSPORASIG ADD CONSTRAINT FK_ENCUESTA_GRUPOSPORASIG_CURSOACADEMICO FOREIGN KEY (CURSOACADEMICO, ASIGNATURA, GRUPO) REFERENCES GRUPOSPORASIG (CURSOACADEMICO, ASIGNATURA, GRUPO)
ALTER TABLE ENCUESTA_GRUPOSPORASIG ADD CONSTRAINT ENCUESTAGRUPOSPORASIGcontieneEncuestas_Fecha_Envio FOREIGN KEY (contieneEncuestas_Fecha_Envio) REFERENCES ENCUESTA (Fecha_Envio)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
